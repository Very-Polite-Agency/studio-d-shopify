<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

<main class="page-product pt-40">

  <!-- SECTION: PRODUCT MAIN -->
  <section class="product-main">

    <div class="container-fluid">
      <div class="row">
        <div class="col-12 col-lg-7 position-relative">
          <div class="swiper swiper-product mb-10">
            <div class="swiper-wrapper">
              {% for media in product.media %}
              <div class="swiper-slide">
                {%
                render 'lazyload-image',
                alt_text: 'Product',
                image: media,
                %}
                </a>
              </div>
              {% endfor %}
            </div>

          </div>
          <div thumbsSlider="" class="swiper swiper-thumbnail">
            <div class="swiper-wrapper">
              {% for media in product.media %}
              <div class="swiper-slide">
                {%
                render 'lazyload-image',
                alt_text: 'Product',
                image: media,
                %}
                </a>
              </div>
              {% endfor %}
            </div>

          </div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
        <div class="col-12 col-lg-5 px-lg-50 pt-40 pt-lg-0 ">
          <h4 class="pb-10">{{ product.title }}</h4>
          <span>{% render 'price', product: product %} </span>
          <p class="pr-15 pt-2">
            {{ product.description }}
          </p>

          <!-- QTY BTN + ADD TO CART (NOT FUNCTIONING RN LOL) -->
          <div class="row pt-30 pt-lg-70 justify-content-between">
            <div class="col-6">
              <div class="product-form__input product-form__quantity{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} product-form__quantity-top{% endif %}" {{ block.shopify_attributes }}>
  
                <quantity-input class="quantity">
                  <button class="quantity__button no-js-hidden" name="minus" type="button">
                    <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}</span>
                    -
                  </button>
                  <input class="quantity__input"
                      type="number"
                      name="quantity"
                      id="Quantity-{{ section.id }}"
                      min="1"
                      value="1"
                      form="{{ product_form_id }}"
                    >
                  <button class="quantity__button no-js-hidden" name="plus" type="button">
                    <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: product.title | escape }}</span>
                    +
                  </button>
                </quantity-input>
              </div>
            </div>
            <div class="col-6">
              <product-form class="product-form">
                <div class="product-form__error-message-wrapper" role="alert" hidden>
                  <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-error"
                    viewBox="0 0 13 13">
                    <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2" />
                    <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7" />
                    <path
                      d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z"
                      fill="white" />
                    <path
                      d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z"
                      fill="white" stroke="#EB001B" stroke-width="0.7">
                  </svg>
                  <span class="product-form__error-message"></span>
                </div>

                {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type:
                'add-to-cart-form' -%}
                <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
                <div class="product-form__buttons">
                  <button type="submit" name="add" class="cta justify-content-end" {% if
                    product.selected_or_first_available_variant.available==false %}disabled{% endif %}>
                    <div class="link outlined">
                      <span class="link__title">
                        {%- if product.selected_or_first_available_variant.available -%}
                        {{ 'products.product.add_to_cart' | t }}
                        {%- else -%}
                        {{ 'products.product.sold_out' | t }}
                        {%- endif -%}
                      </span>
                      <div class="loading-overlay__spinner hidden">
                        <svg aria-hidden="true" focusable="false" role="presentation" class="spinner"
                          viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                          <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                        </svg>
                      </div>
                    </div>
                  </button>
                  {%- if block.settings.show_dynamic_checkout -%}
                  {{ form | payment_button }}
                  {%- endif -%}
                </div>
                {%- endform -%}
              </product-form>
            </div>
          </div>
          <!-- // -->

          <div class="row pt-25">
            <div class="col-12">
              <div class="accordion" id="accordion-{{ product.title | replace: ' ', '-' }}">

                {% if product.metafields.my_fields.details != blank %}
                  
                  <div class="navigation__item" id="headingOne-{{ product.title | replace: ' ', '-' }}">
                    <button class="navigation__link link w-100 justify-content-between" target="_self" title="ShopAll" type="button" data-toggle="collapse" data-target="#collapseOne-{{product.title | replace: ' ', '-'}}" aria-expanded="false" aria-controls="collapseOne-{{product.title | replace: ' ', '-'}}"><span
                      class="link-text">Details</span>
                      <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.5 0V11" stroke="black"/>
                        <path d="M11 5.5L0 5.5" stroke="black"/>
                      </svg>                    
                    </button>
                  </div>
    
                  <div id="collapseOne-{{ product.title | replace: ' ', '-' }}" class="collapse accordion-content" aria-labelledby="headingOne-{{ product.title | replace: ' ', '-' }} " data-parent="#accordion-{{ product.title | replace: ' ', '-' }}">
                    <p class="pt-2">
                      {{ product.metafields.my_fields.details | metafield_tag  }}
                    </p>
                  </div>
                {% endif %}

                {% if product.metafields.my_fields.features != blank %}
                  
                  <div class="navigation__item" id="headingTwo-{{ product.title | replace: ' ', '-' }}">
                    <button class="navigation__link link w-100 justify-content-between" target="_self" title="ShopAll" type="button" data-toggle="collapse" data-target="#collapseTwo-{{product.title | replace: ' ', '-'}}" aria-expanded="false" aria-controls="collapseTwo-{{product.title | replace: ' ', '-'}}"><span
                      class="link-text">Features</span>
                      <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.5 0V11" stroke="black"/>
                        <path d="M11 5.5L0 5.5" stroke="black"/>
                      </svg>                    
                    </button>
                  </div>
    
                  <div id="collapseTwo-{{ product.title | replace: ' ', '-' }}" class="collapse accordion-content" aria-labelledby="headingTwo-{{ product.title | replace: ' ', '-' }} " data-parent="#accordion-{{ product.title | replace: ' ', '-' }}">
                    <p class="pt-2">
                      {{ product.metafields.my_fields.features | metafield_tag }}
                    </p>
                  </div>
                {% endif %}

                {% if product.metafields.my_fields.dimensions != blank %}
                  
                  <div class="navigation__item" id="headingThree-{{ product.title | replace: ' ', '-' }}">
                    <button class="navigation__link link w-100 justify-content-between" target="_self" title="ShopAll" type="button" data-toggle="collapse" data-target="#collapseThree-{{product.title | replace: ' ', '-'}}" aria-expanded="false" aria-controls="collapseThree-{{product.title | replace: ' ', '-'}}"><span
                      class="link-text">Dimensions</span>
                      <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.5 0V11" stroke="black"/>
                        <path d="M11 5.5L0 5.5" stroke="black"/>
                      </svg>                    
                    </button>
                  </div>
    
                  <div id="collapseThree-{{ product.title | replace: ' ', '-' }}" class="collapse accordion-content" aria-labelledby="headingThree-{{ product.title | replace: ' ', '-' }} " data-parent="#accordion-{{ product.title | replace: ' ', '-' }}">
                    <p class="pt-2">
                      {{ product.metafields.my_fields.dimensions | metafield_tag }}
                    </p>
                  </div>
                {% endif %}
                
                {% if product.metafields.my_fields.materials != blank %}
                  
                  <div class="navigation__item" id="headingFour-{{ product.title | replace: ' ', '-' }}">
                    <button class="navigation__link link w-100 justify-content-between" target="_self" title="ShopAll" type="button" data-toggle="collapse" data-target="#collapseFour-{{product.title | replace: ' ', '-'}}" aria-expanded="false" aria-controls="collapseFour-{{product.title | replace: ' ', '-'}}"><span
                      class="link-text">Materials + Care</span>
                      <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.5 0V11" stroke="black"/>
                        <path d="M11 5.5L0 5.5" stroke="black"/>
                      </svg>                    
                    </button>
                  </div>
    
                  <div id="collapseFour-{{ product.title | replace: ' ', '-' }}" class="collapse accordion-content" aria-labelledby="headingFour-{{ product.title | replace: ' ', '-' }} " data-parent="#accordion-{{ product.title | replace: ' ', '-' }}">
                    <p class="pt-2">
                      {{ product.metafields.my_fields.materials | metafield_tag }}
                    </p>
                  </div>
                {% endif %}

              </div>
            </div>
          </div>

          <div class="row pt-40 pt-lg-60">
              <div class="col-12 link-text">
                {%- assign current_variant = product.selected_or_first_available_variant -%}

                  {% if current_variant.sku != blank %}
                  <p class="pb-2">SKU: {{ current_variant.sku }}</p>
                  {% endif %}


                  {% if product.available %}
                  <p>Item availability: in stock</p>
                  {% else %}
                  <p>Item availability: out of stock</p>
                  {% endif %}

              </div>
          </div>

          <div class="row pt-20">
            <div class="col-12 link-text">
              <p class="pb-2">This item appears in:</p>
              <p class="underline pb-2"> NYC HOUSE</p>
              <p class="underline pb-2">LA apartment</p>
            </div>
          </div>

        </div>
      </div>
    </div>

  </section>
  <!-- // -->

  

</main>

<!-- Initialize Swiper -->
<script>
  var swiper = new Swiper(".swiper-thumbnail", {
    spaceBetween: 10,
    slidesPerView: 3,
    freeMode: true,
    watchSlidesProgress: true,
  });
  var swiper2 = new Swiper(".swiper-product", {
    spaceBetween: 10,
    effect: "fade",
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    thumbs: {
      swiper: swiper,
    },
  });
</script>
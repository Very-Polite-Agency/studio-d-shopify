{%- assign section_name = 'fifty-fifty' -%}
{%- assign section_id = section_name | append: '--' | append: section.id -%}

{% assign cta_title = section.settings.cta_title | default: '' %}
{% assign cta_link = section.settings.cta_link | default: '' %}

{% if section.settings.anchor_id != blank %}
  {% assign section_id = section.settings.anchor_id %}
{% endif %}

{% capture aos_attrs_img %}
    {%
      render 'aos-attributes',
      anchor: section.id,
      anchor_placement: 'top-bottom',
      delay: 0,
      duration: 550,
      easing: 'ease-in-out',
      offset: 175,
      once: 'true',
      transition: 'fade-left',
    %}
{% endcapture %}

{% capture aos_attrs_text %}
    {%
      render 'aos-attributes',
      anchor: section.id,
      anchor_placement: 'top-bottom',
      delay: 500,
      duration: 550,
      easing: 'ease-in-out',
      offset: 175,
      once: 'true',
      transition: 'fade-right',
    %}
{% endcapture %}

{% capture aos_attrs_btn %}
    {%
      render 'aos-attributes',
      anchor: section.id,
      anchor_placement: 'top-bottom',
      delay: 1000,
      duration: 550,
      easing: 'ease-in-out',
      offset: 175,
      once: 'true',
      transition: 'fade-up',
    %}
{% endcapture %}


<div class="container-fluid px-0 {{ section_name }}-wrapper mb-lg-150" id="{{ section.id }}">
  <div class="row justify-content-center">
    {%- for block in section.blocks -%}
      {%- case block.type -%}

        {%- when 'media' -%}

          <div class="fifty-fifty_media col-12 col-lg-7 px-0" {{aos_attrs_img}}>
            {% if cta_link != blank %}<a class="fifty-fifty__media-link link" href="{{ cta_link }}" title="{{ cta_title }}" target="{% if cta_link contains 'http' %}_blank{% else %}_self{% endif %}">{% endif %}
              {%
                render 'lazyload-image',
                alt_text: 'Fifty-Fifty Image',
                image:  block.settings.image,
              %}
            {% if cta_link != blank %}</a>{% endif %}
          </div>

        {%- when 'content' -%}

          {% assign heading = block.settings.heading | default: '' %}
          {% assign message = block.settings.message | default: '' %}

          <div class="fifty-fifty_content {% if forloop.first == true %} left {% else %} right {% endif%}  col-10 col-md-8 col-lg-5 d-flex px-30 px-lg-50  pt-50 pb-75 pb-lg-50 py-lg-0">
            <div class="fifty-fifty_content-wrapper d-flex flex-column justify-content-center">

              {% if heading != blank %}
                <h2 class="fifty-fifty__heading heading" {{ aos_attrs_text }}>{{ heading }}</h2>
              {% endif %}

              {% if message != blank %}
                <div class="fifty-fifty__message message" {{ aos_attrs_text }}>{{ message }}</div>
              {% endif %}

              {% if cta_link != blank and cta_title != blank %}
                <div class="fifty-fifty__ctas">
                  <div class="fifty-fifty__cta" {{aos_attrs_btn}}>
                    <div class="cta" data-justify="not-set">
                      <a class="link outlined" href="{{ cta_link }}" title="{{ cta_title }}"  target="{% if cta_link contains 'http' %}_blank{% else %}_self{% endif %}">
                        <span class="link__title">{{ cta_title }}</span>
                      </a>
                    </div>
                  </div>
                </div>
              {% endif %}

            </div>
          </div>

      {% endcase %}

    {%- endfor -%}
  </div>
</div>



</div>

{% schema %}
{
	"name": "Fifty-Fifty",
	"tag": "section",
	"class": "section section--fifty-fifty",
	"max_blocks": 2,
	"settings": [
    {
 		 "content": "Call to Action",
 		 "type": "header"
 		},
    {
			"label": "Title",
			"type": "text",
      "default": "Shop now",
			"id": "cta_title"
		},
		{
		  "label": "Link",
			"type": "url",
			"id": "cta_link"
		}
  ],
	"blocks": [
	  {
			"name": "Content",
			"type": "content",
			"limit": 1,
			"settings": [
			  {
					"label": "Heading",
					"type": "text",
					"id": "heading"
				},
        {
					"label": "Message",
					"type": "richtext",
					"id": "message"
				}
			]
		},
		{
			"name": "Media",
			"type": "media",
			"limit": 1,
			"settings": [
			  	{
					"label": "Image",
					"type": "image_picker",
					"id": "image"
				}
			]
		}
	],
	"presets": [
	  {
		"name": "Fifty-Fifty"
	  }
	]
}
{% endschema %}
